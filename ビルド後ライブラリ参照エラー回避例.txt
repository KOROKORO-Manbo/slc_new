
△ 題材：SLC_HPのクリスマスバージョン（ブランチ：xmas）で初期モーダルアニメ＆降雪効果追加時

△ 効果素材の構成と初期状態：

	index.html
		js
		 |--- index.js
		 |--- main.js
		 |--- jquery.inview.js
		 		・・・
		 |--- xmas_effect 
				|--- main.js
				|		|--- rectangleEmitter.js				パーティクルの生成エンジンライブラリ	var rectangleEmitter = { ... 
				|		|--- snow.js								パーティクル定義										var snow = { ...
				|
				|--- classie.js									CSSの class 操作ライブラリ						( function( window ) { ... var classie = { ... } } )( window )
																																												 
△ 問題点：
	scriptタグで読み込んでいた時は基本的にグローバルでの展開になるので特に気にしていなかったが
	モジュール管理のWebPackでバンドルすると、使おうとするモジュール（ライブラリなど）は
	モジュールの囲いの中に収めれれて管理されるようになる。
	そうすると、使う側／使われる側 の間がスコープ的に遮断され見えなくなり動作しなくなる現象が起こる
	これはいくら依存関係を考えてimportするファイルや位置を買えても同じで、< どこでimportしても同じ > で
	囲まれてしまうので見えなくなる。解決策としては囲まれる時に全部グローバルに晒すかES6仕様（import/export）にすることになる	

△モジュール管理する意味
	色々なものをグローバル晒すやり方より、依存関係を守って、使いたい機能だけを使われる側と使う側の「間だけ」でやりとりし
	他から見えない形にしたほうが安全であり、それがモジュール管理なので、できるだけそうすること
	そうするにはwindowを使って晒すのではなく、
	使われる方で export し、使う方で import し、その二者間以外には全く見えなくすれば大規模化・複雑化しても安全性が確保される
																						 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

△ 解決策１：全てをグローバルにさらす
ーーーーーーーーーーーーーーーーーー
	index.html に scriptタグで読み込まれている順で index.js に import したら ./build/index.html  では動作不具合となった
				import './xmas_effect/rectangleEmitter.js'
				import './xmas_effect/snow.js'
				import myClassie from './xmas_effect/classie.js'
		↓
	エミッターやパーティクルの定義がWebPackの「モジュールの囲い」に収められたため、外から見えなくなってしまった
		↓
	「モジュールの囲い」に収められながらも読み込み時にグローバルに晒す変更をした
				rectangleEmitter.js		window.rectangleEmitter = { ... }
				snow.js							window.snow = { ... }
				classie.js						( function( window ) { ... window.classie = { ... } } )( window ) }
		↓																				  ^^^^^^^^
	index.js での import も少し変更
				import './xmas_effect/rectangleEmitter.js'
				import './xmas_effect/snow.js'
				import myClassie from './xmas_effect/classie.js'			← これら３つともグローバルに晒されているので読み込むだけで他から見えるようになった

	このようにして、HTML内で、scriptタグによって読み込んでいるがごとく、全部グローバルにさらして解決した


△ 解決策２：ライブラリの中身をES6仕様（import/export）にする
ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
				rectangleEmitter.js		export let rectangleEmitter = { ... }
				snow.js							export let snow = { ... }  	export let snow_slow = { ... }
				classie.js						export default ()=>{ ( function( window ) { ... var classie = { ... } } )( window ) }　元のIIFEをexportする関数内に収めてる
					↓ ↓ ↓ ↓ 
				./js/xmas_effect/main.js
					 import {rectangleEmitter} from './rectangleEmitter.js'			依存関係どおりrectangleEmitterとsnowはこのmain.jsでimport
					 import {snow, snow_slow} from './snow.js'
				./js/index.js
					import classie from './xmas_effect/classie.js'						全体のCSS操作ライブラリはindex.jsでimport
					classie( )																				importした関数実行で、元のIIFEを実行している
					import './xmas_effect/main.js'												効果用JSをまとめたmain.jsを元のmain.jでimport
					
					
△ モジュールの囲い：bundle.js内でモジュール単位で「囲まれ」ている

	/* 11 */ (function(module, exports) { module.exports = "data:image/png;base64,iVBO ...
	/* 12 */ (function(module, exports) { (function() { !function (a, b) {  "use strict";	...
	
	(function(module, exports, __webpack_require__) {
	exports = module.exports = __webpack_require__(1)();
		・・・